---
date: '2008-01-30T14:55:00.000-08:00'
description: ''
published: true
slug: 2008-01-databases-suck
tags:
- http://schemas.google.com/blogger/2008/kind#post
- General
- legacy-blogger
time_to_read: 5
title: Databases Suck
---

*This was originally posted on blogger [here](https://techshorts.blogspot.com/2008/01/databases-suck.html)*.

I am sick of working with databases, they all suck. &nbsp;I can generalize this to any type of data store, they all suck.<br /><br />OK, they don't really suck but I sure have seen a lot of database designs that do.&nbsp; I am tired of working with applications that have lots and lots of large tables, tables with lots and lots of fields.&nbsp; Of course all the fields but the primary key are nullable because you might not always need that extra address field but it is there, just in case.<br /><br />And don't get me started on compound primary keys.&nbsp; If I see tables with compound primary keys then I am trying to get off of that project.<br /><br />What if we have to change the database, add a field, remove a field or just plain rename a field?&nbsp; Well that just broke the application, not just the code you own but the code in a module you never heard of that the reporting team is using.&nbsp; Why can we not update schema's without worrying about causing the build to fail?<br /><br />And what about all the boiler plate code needed to communicate with your database?&nbsp; We have to invest in code generators that get it about 80% right.&nbsp; Then the databinding to the forms, after all a database does no good unless you can get data into it.<br /><br />So how do we solve this problem?&nbsp; Get ride of the database?&nbsp; Use only CSV files?&nbsp; Go back to pencils and paper?&nbsp; Those are options but not necessarily good ones.&nbsp; We have the technology so why not use it, only use it in a different way.<br /><br />What are we trying to do with the database any way?&nbsp; Store values so we can retrieve them later.<br /><br />What about history?&nbsp; How do we know when someone changed a value?&nbsp; And what was the value before?<br /><br />What is a value?&nbsp; If we don't know what it is we are storing then how are we going to know how to store it?<br /><br />Based on the majority of the applications I have worked on values tend to be descriptions or measurements.&nbsp; Descriptions are remarks, model numbers, serial numbers or some other form of text that has meaning to the object.&nbsp; Measurements are attributes of an object that magnitude relative to some unit of measurement system.&nbsp;&nbsp;<a href="http://en.wikipedia.org/wiki/Measurement" target="" title="">Wikipeda</a> has a better description of it than I do so check it out then come back.<br /><br />Note that this is not a new idea, I read about measurement values somewhere but I can't for the life of me find who actually came up with it orginally.&nbsp; And if you really want to get technical about measurement values there are scalers (magnitude only) and vectors (magnitude and direction).<br /><br />So how do we handle this in databases?&nbsp; First we create a measurement table like such:<br /><div style="text-align: right;"><div style="text-align: center;"><img align="absmiddle" alt="Measurement Table" border="0" hspace="0" src="http://writer.zoho.com:80/ImageDisplay.im?name=344506000000007001/1201752124371_MeasurementTable.png&amp;accId=344506000000002007" vspace="0" /><br /></div><div style="text-align: left;">This table is pretty basic:&nbsp; You have your primary key Id, the magnitude of the measurement is the value and the system used is determined by the UnitOfMeasurement.&nbsp; The CreatedBy and CreatedOn is for audit and historical purposes.&nbsp; To maintain a history in the database we will not allow deletes from this table, only inserts.&nbsp; This allows us to see all the changes made to this value when they were made and by who.&nbsp; The value that was added last is the current value.<br /><br />Now that we have the measurement what exactly are we measuring?&nbsp; We need some properties of some kind.&nbsp; So we need a Property table and a link to the Measurement table.<br /><div style="text-align: center;"><img align="bottom" alt="Property Measurement" border="0" hspace="0" src="http://writer.zoho.com:80/ImageDisplay.im?name=344506000000007001/1201752957798_PropertyMeasurement.png&amp;accId=344506000000002007" vspace="0" /><br /></div>We have the Id again which becomes the foreign key in the Measurement table.&nbsp; The name is what the property is called and the TypeOfMeasurement is the attribute being measure.&nbsp; This could be length, mass, weight, currency, velocity, acceleration, etc.&nbsp; Note that it is the UnitOfMeasurement in the Measurement table that dictates if we use feet, meters, kilograms, pounds, US Dollars, Euros, meters per second, etc.<br /><br />What do these properties apply to though?&nbsp; We need an object that has properties:<br /><div style="text-align: center;"><img align="bottom" alt="Object Properties" border="0" hspace="0" src="http://writer.zoho.com:80/ImageDisplay.im?name=344506000000007001/1201753728226_objectProperties.png&amp;accId=344506000000002007" vspace="0" /><br /></div><br />Now this is just getting crazy.&nbsp; Our object can have many properties but also our properties can belong to many objects.&nbsp; We will have to work that little kink out but for now I think I will stop playing with pictures.<br /><br />What is it I really am trying to do?&nbsp; I want to reduce the pain of making changes to the database for an application.&nbsp; What does that mean?<br /><br />Let us say for example we create an app that needs to track squares.&nbsp; Nothing fancy, just a square.&nbsp; Our first instinct is to create a table such as:<br /><img align="bottom" alt="Square" border="0" hspace="0" src="http://writer.zoho.com:80/ImageDisplay.im?name=344506000000007001/1201754189141_square.png&amp;accId=344506000000002007" vspace="0" /><br /><br />After building many forms and reports off of our square table management comes along and says we need to track cubes!&nbsp; Those eF'ers! &nbsp;You have to go back, change the name of the table, wait, no just leave the name the same, I'll remember what it really should be.&nbsp; Add the new column Height, modify all the data access code, forms and reports to use the new value and life goes on.<br /><br />Till six months later when management comes back and says that some federal requirements mandate that all changes to the cubes be tracked for three years.&nbsp; So you look for your cube table which doesn't exist.&nbsp; There is this square table with all the right fields, but squares don't have height, they are flat!&nbsp; Screw it just add a history table, copy the rows as they are changed, create some triggers, job done.<br /><br />Except management finds out that Canada has been entering values in metric but in the states it is in feet.&nbsp; Plus Canada has been updating some of the US'es cubes.&nbsp; Now is the time to get the resume ready.<br /><br />Databases suck.&nbsp; Working with databases is a pain but it really shouldn't be.&nbsp; This extends beyond databases, it applies to objects as well.&nbsp; How to stop the pain?&nbsp; Stop adding values directly to the table.&nbsp; Granted this is not a 100% solution, I mean really if I had a square object I wouldn't worry a lot about keeping track of two fields.<br /><br />But if I had some complicated object that had many properties, and I was still in the development cycle where all of the properties still had not been identified, I think I would take the Measurement table approach.<br /></div></div><br /> Technorati Tags &nbsp; &nbsp; <a href="http://technorati.com/tag/database" rel="tag">database</a>